# 농구영상 득점 자동 판별기 만들기

[코드 참고 사이트](https://bskyvision.com/678)

```python
import cvlib as cv
from cvlib.object_detection import draw_bbox

image_path = 'ball.PNG' 
im = cv2.imread(image_path)

bbox, label, conf = cv.detect_common_objects(im)

print(bbox, label, conf)

im = draw_bbox(im, bbox, label, conf) 

cv2.imwrite('result.jpg', im) 
```

![result](./img2/result.jpg)

- 이 사진처럼 사람을 식별하고 공을 식별해서 자동으로 득점을 기록하고 어떤 선수가 넣었는지 기록하는 것을 만들어보려고 한다.
- 이것은 사진이라 이렇게 판별이 가능한 것이고 영상으로는 다음의 링크를 참고해서 하려고 한다.

[영상코드 참고사이트1](https://m.blog.naver.com/PostView.nhn?blogId=gyurse&logNo=221182329076&proxyReferer=https:%2F%2Fwww.google.co.kr%2F)

[영상코드 참고 사이트2](https://hwangpy.tistory.com/3)

#### 데모 실행해보기

- tutorial 실행하는데 경로 설정하는게 가장 힘들었다. 참고 해서 정상적으로 만들때는 바꿔야겠다.
- 코드 분석이 더 필요하다. 그냥 하는것보다 분석해서 하는게 나중에 큰 도움이 될 것 같다.

![01](./img2/01.png)

![02](./img2/02.png)

- 실행하면 요로코롬 나온다.

![03](./img2/03.jpg)

- 마지막 부분에서 이러한 오류가 발생하여 잡기로 해결방법을 찾으려고 한다.

#### 오류 잡기

- 텐서플로의 2.x버전의 문제로 1.x 버전을 사용하면 된다고 나와있다.

[오류 깃 링크](https://github.com/tensorflow/models/issues/9304)

```python
!pip uninstall tensorflow
!pip install tensorflow==1.15
```

- 기존의 텐서플로우를 삭제하고 다시 1.x버전으로 설치한다.
- 예전에는 2.x버전에서도 자동으로 변환?같이 해줘서 실행되었다는데 요즘은 안 되는것 같다.

- uninstall이 안 될경우 그냥 install을 해도 설치가 되었다.

```python
model_name = 'ssd_mobilenet_v1_coco_2017_11_17'
detection_model = load_model(model_name)
```

- 이 부분에서 오류가 나서 다시 2.x버전으로 위의 오류를 해결할 방법을 찾아보자.
- 코랩으로 돌려야하는것 같아서 코랩으로 돌려보려고 한다. 지금까지는 주피터에서 작업하였다.

#### tensorflow-gpu깔기

- cpu버전과 gpu버전이 있어서 gpu버전도 설치하였다. 거의 4~5시간정도 걸렸다.